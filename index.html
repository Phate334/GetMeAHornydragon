<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=0">
    <title>給我一個雜七雜八的好色龍</title>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css">
</head>

<body>
    <div data-rote="page">
        <div data-role="header" data-position="fixed">
            <h1><button id="random_btn">給我一個雜七雜八的好色龍</button></h1>
        </div>
        <div role="main" class="ui-content" style="text-align: center;">
            <img id="image" src=""></img>
            <p>出處:<a id="article" href="" target="_blank"></a></p>
        </div>
        <div data-role="footer" data-position="fixed">
            <h1>PhateW</h1>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
    <script>
        function updateView(){
            console.log(Math.random() * fullData.length);
            artNum = Math.floor(Math.random() * fullData.length);
            imgNum = Math.floor(Math.random() * fullData[artNum]["imgs"].length);
            $("#image").attr("src", fullData[artNum]["imgs"][imgNum]);
            $("#article").attr("href", fullData[artNum]["url"])
            $("#article").text(fullData[artNum]["name"])
        }
    </script>
    <script>
        $(document).ready(function(){
                $("#random_btn").click(updateView);
            });
        var fullData;
        $.ajax({
            url: "imgs.json",
            type: "GET",
            dataType: "json",
            success: function(data){
                fullData = data;
                updateView();
            }
        });
    </script>
</body>

</html>